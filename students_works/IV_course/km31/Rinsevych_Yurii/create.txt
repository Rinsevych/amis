CREATE TABLE "QUESTIONS" 
   (	"Q_TEXT" CHAR(100 BYTE) NOT NULL ENABLE, 
	"Q_ID" NUMBER NOT NULL ENABLE);

CREATE OR REPLACE TRIGGER "deleteQuest" 
before delete 
ON Questions 
FOR EACH ROW 
BEGIN 
delete results 
where results.q_id = :old.q_id; 
END;

ALTER TRIGGER "deleteQuest" ENABLE;

CREATE TABLE "RESPONDENTS" 
   (	"RES_NAME" CHAR(50 BYTE) NOT NULL ENABLE, 
	"RES_EMAIL" CHAR(30 BYTE) NOT NULL ENABLE, 
	"FACULTY" CHAR(50 BYTE) NOT NULL ENABLE, 
	"RES_PASWORD" CHAR(32 BYTE) NOT NULL ENABLE);

CREATE TABLE "RESULTS" 
   (	"MARKS" FLOAT(126) NOT NULL ENABLE, 
	"TEACHER_ID" NUMBER NOT NULL ENABLE, 
	"Q_ID" NUMBER, 
	"VOTE_TIME" CHAR(40 BYTE)
   );

CREATE TABLE "TEACHERS" 
   (	"TEACHER_NAME" CHAR(50 BYTE) NOT NULL ENABLE, 
	"TEACHER_EMAIL" CHAR(255 BYTE) NOT NULL ENABLE, 
	"FACULTY" CHAR(50 BYTE) NOT NULL ENABLE, 
	"TEACHER_ID" NUMBER);

  CREATE OR REPLACE FORCE VIEW "YURIY"."AVERAGE" ("TID", "MRK") AS 
  select teacher_id tid, round(avg(marks),2) mrk from results
group by teacher_id;
